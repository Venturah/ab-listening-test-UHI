<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>A/B Listening Test</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <main class="page">
    <header class="header">
      <h1>A/B Listening Test</h1>

      <div class="info-links">
        <p><strong>Before beginning the listening test, please read the following documents:</strong></p>
        <ul>
          <li>
            ðŸ“˜
            <a
              href="https://dl.dropboxusercontent.com/scl/fi/yxpb93lvlfk3b5ur05ci3/UHI-Research-Ethics-IAIN-MCCLOSKY-12007248.pdf?rlkey=mw6gz3uyv48s56ayvr5jjynss"
              target="_blank"
              rel="noopener"
            >
              Participant Information Sheet
            </a>
          </li>
          <li>
            ðŸ“„
            <a
              href="https://dl.dropboxusercontent.com/scl/fi/1l5cvfgtu876brwx4paza/CONSENT-FORM-12007248-IAIN-MCCLOSKY.pdf?rlkey=dgththbxwb7etbl2pxlczzrlc"
              target="_blank"
              rel="noopener"
            >
              Consent Form (please read before participating)
            </a>
          </li>
        </ul>
      </div>
    </header>

    <section class="form-section">
      <h2>Participant Information</h2>

      <form id="demographicForm">
        <label>
          Age:
          <input type="number" name="age" min="16" max="99" inputmode="numeric" required>
        </label>

        <label>
          Gender identity:
          <select name="gender" required>
            <option value="">Select</option>
            <option>Male</option>
            <option>Female</option>
            <option>Non-binary</option>
            <option>Prefer to self-describe</option>
            <option>Prefer not to say</option>
          </select>
        </label>

        <label id="selfDescribeContainer" style="display:none;">
          If you selected "Prefer to self-describe", please specify:
          <input type="text" name="gender_self_describe">
        </label>

        <label>
          Audio experience:
          <select name="experience" required>
            <option value="">Select</option>
            <option>None</option>
            <option>Hobbyist</option>
            <option>Student</option>
            <option>Professional</option>
          </select>
        </label>

        <label>
          Device:
          <select name="device" required>
            <option value="">Select</option>
            <option>iPhone</option>
            <option>Android phone</option>
            <option>Windows laptop/desktop</option>
            <option>Mac</option>
            <option>Other</option>
          </select>
        </label>

        <label>
          Listening method:
          <select name="output" required>
            <option value="">Select</option>
            <option>Bluetooth earbuds/headphones (e.g., AirPods)</option>
            <option>Wired headphones</option>
            <option>Built-in speakers</option>
            <option>Audio interface / DAC</option>
          </select>
        </label>

        <label>
          Listening environment:
          <select name="environment" required>
            <option value="">Select</option>
            <option>Quiet room</option>
            <option>Some background noise</option>
            <option>Noisy environment</option>
          </select>
        </label>

        <label>
          Any known hearing issues?
          <select name="hearing" required>
            <option value="">Select</option>
            <option>No</option>
            <option>Yes</option>
            <option>Prefer not to say</option>
          </select>
        </label>

        <label>
          Describe your listening setup (e.g., AirPods, wired headphones, speakers, interface/DAC):
          <textarea
            name="setup"
            rows="3"
            placeholder="e.g. AirPods Pro (Bluetooth) on iPhone"
            required
          ></textarea>
        </label>
      </form>
    </section>

    <section class="test-section">
      <h2>Listening Test</h2>
      <p class="hint">Tip: Use a consistent volume and avoid switching devices during the test.</p>

      <div id="testContainer"></div>

      <div class="submit-row">
        <button type="button" id="submitBtn" onclick="submitResults()">Submit Test</button>
      </div>
    </section>
  </main>

  <script src="/static/main.js"></script>

  <script>
    const genderSelect = document.querySelector('select[name="gender"]');
    const selfDescribeContainer = document.getElementById('selfDescribeContainer');

    genderSelect.addEventListener('change', function () {
      if (this.value === "Prefer to self-describe") {
        selfDescribeContainer.style.display = "block";
      } else {
        selfDescribeContainer.style.display = "none";
      }
    });
  </script>

</body>
</html>
